{% extends  "layout/admin/base-admin.html" %}
{% load static %}

{% block extrastyle %}
<style>
    .pagination a {
        color: black;
        float: left;
        padding: 4px 8px;
        text-decoration: none;
        transition: background-color .3s;
    }
    
    .pagination a.active {
        background-color: dodgerblue;
        color: white;
    }
    
    .pagination a:hover:not(.active) {background-color: #ddd;
    }
</style>
{% endblock%}

{% block page_content %}
<section class="content-header">
    <div class="row">
        <div class="col-md-12">
            <div class="box box-primary">
                <div class="box-footer clearfix">
                    <div class="box-header with-border">
                        <i class="fa fa-users"></i>
                        <h1 class="box-title">Daftar User {{akun.first_name}} {{akun.last_name}}</h1>
                    </div>
                    <div class="input-group input-group-md col-md-4 col-xs-6 col-lg-4 pull-left">
                        <input type="text" class="form-control" placeholder="Cari.....">
                        <span class="input-group-btn">
                            <button type="button" class="btn btn-primary btn-flat"><i class="fa fa-search"></i></button>
                        </span>
                    </div>
                    <div class="pull-right col-md-4">
                        <a class="btn btn-primary pull-right" href="/inventaris/users/tambah"><i class="fa fa-user-plus"></i> Tambah</a>
                    </div>
                    <br/>
                    <br/>
                    <!-- paginate atas -->
                    <center>
                        <nav aria-label="Page navigation example">
                            <ul class="pagination pagination-lg justify-content-center">
                                {% if daftar_user.has_previous %}
                                <li class="page-item">
                                    <a href="?page=1" class="page-item">&laquo;</a>
                                    <a href="?page={{ daftar_user.previous_page_number }}" class="page-item">&lt;</a>
                                </li>
                                {% endif %}
                                <li class="page-item disabled"><span class="current">Page {{ daftar_user.number }} of {{ daftar_user.paginator.num_pages }}.</span></li>
                                {% if daftar_user.has_next %}
                                <li class="page-item">
                                    <a class="page-link" href="?page={{ daftar_user.next_page_number }}">&gt;</a>
                                    <a class="page-link" href="?page={{ daftar_user.paginator.num_pages }}">&raquo;</a>
                                </li>
                                {% endif %}
                            </ul>
                        </nav>
                    </center>
                    <!-- tutup paginate atas -->
                    <br/>
                    <table id="example" class="table table-striped table-bordered">
                        <thead class="thead-dark">
                            <tr>
                                <th>No</th>
                                <th>Nama</th>
                                <th>Username</th>
                                <th>Level</th>
                                {% if request.session.level == 'SuperAdmin' %}
                                <th>Aksi</th>
                                {% endif %}
                            </tr>
                        </thead>
                        <tbody>
                            {% if daftar_user %}
                            {% for user in daftar_user %}
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td>{{ user.nm_lengkap }}</td>
                                <td>{{ user.username }}</td>
                                <td>{{ user.level }}</td>
                                {% if request.session.level == 'SuperAdmin' %}
                                <td>
                                    <a href="/inventaris/users/edit/{{ user.id_user }}" class="btn btn-info">
                                    <i class="fa fa-edit"></i></a>
                                    <a href="/inventaris/users/delete/{{ user.id_user }}" class="btn btn-danger confirm-delete">
                                    <i class="fa fa-trash"></i></a>
                                </td>
                                {% endif %}
                                </tr>
                                {% endfor %}
                                {% else %}
                                <tr>
                                    <td colspan="5"><center>Tidak ada data user saat ini...</center></td>
                                </tr>
                                {% endif %}
                            </tbody>
                        </table> 
                        <!-- paginate bawah -->
                        <center>
                            <nav aria-label="Page navigation example">
                                <ul class="pagination pagination-lg justify-content-center">
                                    {% if daftar_user.has_previous %}
                                    <li class="page-item">
                                        <a href="?page=1" class="page-item">&laquo;</a>
                                        <a href="?page={{ daftar_user.previous_page_number }}" class="page-item">&lt;</a>
                                    </li>
                                    {% endif %}
                                    <li class="page-item disabled"><span class="current">Page {{ daftar_user.number }} of {{ daftar_user.paginator.num_pages }}.</span></li>
                                    {% if daftar_user.has_next %}
                                    <li class="page-item">
                                        <a class="page-link" href="?page={{ daftar_user.next_page_number }}">&gt;</a>
                                        <a class="page-link" href="?page={{ daftar_user.paginator.num_pages }}">&raquo;</a>
                                    </li>
                                    {% endif %}
                                </ul>
                            </nav>
                        </center>
                        <!-- paginate bawah tutup -->
                    </div>
                </div>
            </div>
        </section>
        {% endblock %}
{% block extrajs %}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>
<script>
    $('.confirm-delete').on('click', function(e) {
        return confirm('Apakah anda yakin ingin menghapus data tersebut?')
    })
</script>
{% endblock %}